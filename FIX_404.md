# ðŸ”§ Fix for 404 Error

## The Issue
The backend server is running **old code** that uses `gemini-1.5-flash` (which doesn't exist). The new code uses `gemini-2.0-flash`.

## âœ… Solution: RESTART YOUR BACKEND

### Option 1: Quick Restart (Recommended)

**Step 1:** Stop the old backend
- Find the terminal running your backend
- Press **Ctrl+C**

**Step 2:** Start fresh
```bash
cd backend
npm start
```

### Option 2: Use the Restart Script (Windows)

```powershell
cd backend
powershell -ExecutionPolicy Bypass -File restart_backend.ps1
```

### Option 3: Kill All Node Processes

```powershell
# Kill all node processes
Stop-Process -Name node -Force -ErrorAction SilentlyContinue

# Then restart
cd backend
npm start
```

## âœ… Verify It's Fixed

### Test 1: Check Test Endpoint
```powershell
Invoke-WebRequest -Uri "http://localhost:5000/api/test" -UseBasicParsing
```

Should return:
```json
{
  "message": "Backend is running!",
  "model": "gemini-2.0-flash",
  "apiKeyConfigured": true
}
```

### Test 2: Test API Directly
```bash
cd backend
node test_api.js
```

Should show: âœ… SUCCESS! API is working!

### Test 3: Try Frontend
1. Make sure backend is running
2. Open http://localhost:3000
3. Go to AI Chat tab
4. Type something and click "Ask"
5. Should work! âœ…

## Still Getting 404?

### Check Backend Console
Look at the terminal where the backend is running. The new code will show detailed error logs like:
```
=== API ERROR ===
Full error: ...
Response status: ...
```

### Common Issues:

1. **Server not restarted** - Most common! Make sure you restarted it.
2. **Old code still running** - Kill all node processes and restart
3. **Wrong .env file** - Make sure `backend/.env` has `GEMINI_API_KEY`

### Debug Steps:

1. **Check what model is being used:**
   ```powershell
   # Visit in browser or use curl
   http://localhost:5000/api/test
   ```
   Should show `"model": "gemini-2.0-flash"`

2. **Check backend logs:**
   - The new code logs detailed errors
   - Look for the exact error message from Gemini API

3. **Test API key directly:**
   ```bash
   cd backend
   node test_api.js
   ```

## âœ… Confirmed Working Models

Based on API check, these models work:
- âœ… `gemini-2.0-flash` (currently configured)
- âœ… `gemini-flash-latest` (alternative)
- âœ… `gemini-2.5-flash` (alternative)

If `gemini-2.0-flash` doesn't work, we can switch to one of the alternatives.

## Need More Help?

Check the backend console output - it now shows detailed error messages that will help identify the exact issue!

